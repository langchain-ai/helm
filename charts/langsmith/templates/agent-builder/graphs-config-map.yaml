# This ConfigMap holds configuration for LangGraph-based features.
# The bootstrap job will update this ConfigMap with the actual agent deployment URLs after they are created.
{{- if .Values.agentBuilder.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "langsmith.fullname" . }}-graphs-config
  namespace: {{ .Values.namespace | default .Release.Namespace }}
  labels:
    {{- include "langsmith.labels" . | nindent 4 }}
    app.kubernetes.io/component: graphs
  annotations:
    {{- include "langsmith.annotations" . | nindent 4 }}
data:
  # Tool server URL (external - accessed from browser)
  {{- if .Values.agentBuilder.toolServer.enabled }}
  VITE_AGENT_BUILDER_MCP_SERVER_URL: "https://{{ .Values.config.hostname }}/mcp"
  {{- end }}
  # Trigger server URL (external - accessed from browser)
  {{- if .Values.agentBuilder.triggerServer.enabled }}
  VITE_AGENT_BUILDER_TRIGGERS_API_URL: "https://{{ .Values.config.hostname }}/triggers"
  {{- end }}
  # Agent URLs - these will be populated by the bootstrap job after deployment creation
  # VITE_AGENT_BUILDER_DEPLOYMENT_URL_PUBLIC: "" # Deep agent URL - set by bootstrap job
  # VITE_AGENT_BUILDER_GENERATOR_DEPLOYMENT_URL_PUBLIC: "" # Generator agent URL - set by bootstrap job
{{- end }}
